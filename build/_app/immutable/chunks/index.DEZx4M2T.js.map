{"version":3,"file":"index.DEZx4M2T.js","sources":["../../../../../../node_modules/uuid/dist/esm-browser/rng.js","../../../../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../../../../node_modules/uuid/dist/esm-browser/native.js","../../../../../../node_modules/uuid/dist/esm-browser/v4.js","../../../../../../__vite-browser-external","../../../../../../node_modules/js-sha256/src/sha256.js","../../../../../../node_modules/dayjs/plugin/isToday.js","../../../../../../node_modules/dayjs/plugin/isYesterday.js","../../../../../../node_modules/dayjs/plugin/localizedFormat.js","../../../../../../src/lib/types/index.ts","../../../../../../src/lib/utils/index.ts"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","export default {}","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.10.1\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2023\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = require('crypto')\n    var Buffer = require('buffer').Buffer;\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var bufferFrom;\n    if (Buffer.from && !root.JS_SHA256_NO_BUFFER_FROM) {\n      bufferFrom = Buffer.from;\n    } else {\n      bufferFrom = function (message) {\n        return new Buffer(message);\n      };\n    }\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(bufferFrom(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n      this.chromeBugWorkAround = true;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=o():\"function\"==typeof define&&define.amd?define(o):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isToday=o()}(this,(function(){\"use strict\";return function(e,o,t){o.prototype.isToday=function(){var e=\"YYYY-MM-DD\",o=t();return this.format(e)===o.format(e)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isYesterday=t()}(this,(function(){\"use strict\";return function(e,t,n){t.prototype.isYesterday=function(){var e=\"YYYY-MM-DD\",t=n().subtract(1,\"day\");return this.format(e)===t.format(e)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_localizedFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};return function(t,o,n){var r=o.prototype,i=r.format;n.en.formats=e,r.format=function(t){void 0===t&&(t=\"YYYY-MM-DDTHH:mm:ssZ\");var o=this.$locale().formats,n=function(t,o){return t.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,o){return t||o.slice(1)}))}))}(t,void 0===o?{}:o);return i.call(this,n)}}}));","export type Banner = {\r\n\tid: string;\r\n\ttype: string;\r\n\ttitle?: string;\r\n\tcontent: string;\r\n\turl?: string;\r\n\tdismissible?: boolean;\r\n\ttimestamp: number;\r\n};\r\n\r\nexport enum TTS_RESPONSE_SPLIT {\r\n\tPUNCTUATION = 'punctuation',\r\n\tPARAGRAPHS = 'paragraphs',\r\n\tNONE = 'none'\r\n}\r\n","import { v4 as uuidv4 } from 'uuid';\r\nimport sha256 from 'js-sha256';\r\n\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport isToday from 'dayjs/plugin/isToday';\r\nimport isYesterday from 'dayjs/plugin/isYesterday';\r\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\r\n\r\ndayjs.extend(relativeTime);\r\ndayjs.extend(isToday);\r\ndayjs.extend(isYesterday);\r\ndayjs.extend(localizedFormat);\r\n\r\nimport { WEBUI_BASE_URL } from '$lib/constants';\r\nimport { TTS_RESPONSE_SPLIT } from '$lib/types';\r\n\r\n//////////////////////////\r\n// Helper functions\r\n//////////////////////////\r\n\r\nexport const sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\nfunction escapeRegExp(string: string): string {\r\n\treturn string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\n\r\nexport const replaceTokens = (content, sourceIds, char, user) => {\r\n\tconst charToken = /{{char}}/gi;\r\n\tconst userToken = /{{user}}/gi;\r\n\tconst videoIdToken = /{{VIDEO_FILE_ID_([a-f0-9-]+)}}/gi; // Regex to capture the video ID\r\n\tconst htmlIdToken = /{{HTML_FILE_ID_([a-f0-9-]+)}}/gi; // Regex to capture the HTML ID\r\n\r\n\t// Replace {{char}} if char is provided\r\n\tif (char !== undefined && char !== null) {\r\n\t\tcontent = content.replace(charToken, char);\r\n\t}\r\n\r\n\t// Replace {{user}} if user is provided\r\n\tif (user !== undefined && user !== null) {\r\n\t\tcontent = content.replace(userToken, user);\r\n\t}\r\n\r\n\t// Replace video ID tags with corresponding <video> elements\r\n\tcontent = content.replace(videoIdToken, (match, fileId) => {\r\n\t\tconst videoUrl = `${WEBUI_BASE_URL}/api/v1/files/${fileId}/content`;\r\n\t\treturn `<video src=\"${videoUrl}\" controls></video>`;\r\n\t});\r\n\r\n\t// Replace HTML ID tags with corresponding HTML content\r\n\tcontent = content.replace(htmlIdToken, (match, fileId) => {\r\n\t\tconst htmlUrl = `${WEBUI_BASE_URL}/api/v1/files/${fileId}/content/html`;\r\n\t\treturn `<iframe src=\"${htmlUrl}\" width=\"100%\" frameborder=\"0\" onload=\"this.style.height=(this.contentWindow.document.body.scrollHeight+20)+'px';\"></iframe>`;\r\n\t});\r\n\r\n\t// Remove sourceIds from the content and replace them with <source_id>...</source_id>\r\n\tif (Array.isArray(sourceIds)) {\r\n\t\tsourceIds.forEach((sourceId, idx) => {\r\n\t\t\t// Create a token based on the exact `[sourceId]` string\r\n\t\t\tconst sourceToken = `\\\\[${idx}\\\\]`; // Escape special characters for RegExp\r\n\t\t\tconst sourceRegex = new RegExp(sourceToken, 'g'); // Match all occurrences of [sourceId]\r\n\r\n\t\t\tcontent = content.replace(sourceRegex, `<source_id data=\"${idx}\" title=\"${sourceId}\" />`);\r\n\t\t});\r\n\t}\r\n\r\n\treturn content;\r\n};\r\n\r\nexport const sanitizeResponseContent = (content: string) => {\r\n\treturn content\r\n\t\t.replace(/<\\|[a-z]*$/, '')\r\n\t\t.replace(/<\\|[a-z]+\\|$/, '')\r\n\t\t.replace(/<$/, '')\r\n\t\t.replaceAll(/<\\|[a-z]+\\|>/g, ' ')\r\n\t\t.replaceAll('<', '&lt;')\r\n\t\t.replaceAll('>', '&gt;')\r\n\t\t.trim();\r\n};\r\n\r\nexport const processResponseContent = (content: string) => {\r\n\treturn content.trim();\r\n};\r\n\r\nexport function unescapeHtml(html: string) {\r\n\tconst doc = new DOMParser().parseFromString(html, 'text/html');\r\n\treturn doc.documentElement.textContent;\r\n}\r\n\r\nexport const capitalizeFirstLetter = (string) => {\r\n\treturn string.charAt(0).toUpperCase() + string.slice(1);\r\n};\r\n\r\nexport const splitStream = (splitOn) => {\r\n\tlet buffer = '';\r\n\treturn new TransformStream({\r\n\t\ttransform(chunk, controller) {\r\n\t\t\tbuffer += chunk;\r\n\t\t\tconst parts = buffer.split(splitOn);\r\n\t\t\tparts.slice(0, -1).forEach((part) => controller.enqueue(part));\r\n\t\t\tbuffer = parts[parts.length - 1];\r\n\t\t},\r\n\t\tflush(controller) {\r\n\t\t\tif (buffer) controller.enqueue(buffer);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const convertMessagesToHistory = (messages) => {\r\n\tconst history = {\r\n\t\tmessages: {},\r\n\t\tcurrentId: null\r\n\t};\r\n\r\n\tlet parentMessageId = null;\r\n\tlet messageId = null;\r\n\r\n\tfor (const message of messages) {\r\n\t\tmessageId = uuidv4();\r\n\r\n\t\tif (parentMessageId !== null) {\r\n\t\t\thistory.messages[parentMessageId].childrenIds = [\r\n\t\t\t\t...history.messages[parentMessageId].childrenIds,\r\n\t\t\t\tmessageId\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\thistory.messages[messageId] = {\r\n\t\t\t...message,\r\n\t\t\tid: messageId,\r\n\t\t\tparentId: parentMessageId,\r\n\t\t\tchildrenIds: []\r\n\t\t};\r\n\r\n\t\tparentMessageId = messageId;\r\n\t}\r\n\r\n\thistory.currentId = messageId;\r\n\treturn history;\r\n};\r\n\r\nexport const getGravatarURL = (email) => {\r\n\t// Trim leading and trailing whitespace from\r\n\t// an email address and force all characters\r\n\t// to lower case\r\n\tconst address = String(email).trim().toLowerCase();\r\n\r\n\t// Create a SHA256 hash of the final string\r\n\tconst hash = sha256(address);\r\n\r\n\t// Grab the actual image URL\r\n\treturn `https://www.gravatar.com/avatar/${hash}`;\r\n};\r\n\r\nexport const canvasPixelTest = () => {\r\n\t// Test a 1x1 pixel to potentially identify browser/plugin fingerprint blocking or spoofing\r\n\t// Inspiration: https://github.com/kkapsner/CanvasBlocker/blob/master/test/detectionTest.js\r\n\tconst canvas = document.createElement('canvas');\r\n\tconst ctx = canvas.getContext('2d');\r\n\tcanvas.height = 1;\r\n\tcanvas.width = 1;\r\n\tconst imageData = new ImageData(canvas.width, canvas.height);\r\n\tconst pixelValues = imageData.data;\r\n\r\n\t// Generate RGB test data\r\n\tfor (let i = 0; i < imageData.data.length; i += 1) {\r\n\t\tif (i % 4 !== 3) {\r\n\t\t\tpixelValues[i] = Math.floor(256 * Math.random());\r\n\t\t} else {\r\n\t\t\tpixelValues[i] = 255;\r\n\t\t}\r\n\t}\r\n\r\n\tctx.putImageData(imageData, 0, 0);\r\n\tconst p = ctx.getImageData(0, 0, canvas.width, canvas.height).data;\r\n\r\n\t// Read RGB data and fail if unmatched\r\n\tfor (let i = 0; i < p.length; i += 1) {\r\n\t\tif (p[i] !== pixelValues[i]) {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'canvasPixelTest: Wrong canvas pixel RGB value detected:',\r\n\t\t\t\tp[i],\r\n\t\t\t\t'at:',\r\n\t\t\t\ti,\r\n\t\t\t\t'expected:',\r\n\t\t\t\tpixelValues[i]\r\n\t\t\t);\r\n\t\t\tconsole.log('canvasPixelTest: Canvas blocking or spoofing is likely');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nexport const compressImage = async (imageUrl, maxWidth, maxHeight) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst img = new Image();\r\n\t\timg.onload = () => {\r\n\t\t\tconst canvas = document.createElement('canvas');\r\n\t\t\tlet width = img.width;\r\n\t\t\tlet height = img.height;\r\n\r\n\t\t\t// Maintain aspect ratio while resizing\r\n\r\n\t\t\tif (maxWidth && maxHeight) {\r\n\t\t\t\t// Resize with both dimensions defined (preserves aspect ratio)\r\n\r\n\t\t\t\tif (width <= maxWidth && height <= maxHeight) {\r\n\t\t\t\t\tresolve(imageUrl);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (width / height > maxWidth / maxHeight) {\r\n\t\t\t\t\theight = Math.round((maxWidth * height) / width);\r\n\t\t\t\t\twidth = maxWidth;\r\n\t\t\t\t} else {\r\n\t\t\t\t\twidth = Math.round((maxHeight * width) / height);\r\n\t\t\t\t\theight = maxHeight;\r\n\t\t\t\t}\r\n\t\t\t} else if (maxWidth) {\r\n\t\t\t\t// Only maxWidth defined\r\n\r\n\t\t\t\tif (width <= maxWidth) {\r\n\t\t\t\t\tresolve(imageUrl);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\theight = Math.round((maxWidth * height) / width);\r\n\t\t\t\twidth = maxWidth;\r\n\t\t\t} else if (maxHeight) {\r\n\t\t\t\t// Only maxHeight defined\r\n\r\n\t\t\t\tif (height <= maxHeight) {\r\n\t\t\t\t\tresolve(imageUrl);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\twidth = Math.round((maxHeight * width) / height);\r\n\t\t\t\theight = maxHeight;\r\n\t\t\t}\r\n\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\r\n\t\t\tconst context = canvas.getContext('2d');\r\n\t\t\tcontext.drawImage(img, 0, 0, width, height);\r\n\r\n\t\t\t// Get compressed image URL\r\n\t\t\tconst compressedUrl = canvas.toDataURL();\r\n\t\t\tresolve(compressedUrl);\r\n\t\t};\r\n\t\timg.onerror = (error) => reject(error);\r\n\t\timg.src = imageUrl;\r\n\t});\r\n};\r\nexport const generateInitialsImage = (name) => {\r\n\tconst canvas = document.createElement('canvas');\r\n\tconst ctx = canvas.getContext('2d');\r\n\tcanvas.width = 100;\r\n\tcanvas.height = 100;\r\n\r\n\tif (!canvasPixelTest()) {\r\n\t\tconsole.log(\r\n\t\t\t'generateInitialsImage: failed pixel test, fingerprint evasion is likely. Using default image.'\r\n\t\t);\r\n\t\treturn '/user.png';\r\n\t}\r\n\r\n\tctx.fillStyle = '#F39C12';\r\n\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\tctx.fillStyle = '#FFFFFF';\r\n\tctx.font = '40px Helvetica';\r\n\tctx.textAlign = 'center';\r\n\tctx.textBaseline = 'middle';\r\n\r\n\tconst sanitizedName = name.trim();\r\n\tconst initials =\r\n\t\tsanitizedName.length > 0\r\n\t\t\t? sanitizedName[0] +\r\n\t\t\t\t(sanitizedName.split(' ').length > 1\r\n\t\t\t\t\t? sanitizedName[sanitizedName.lastIndexOf(' ') + 1]\r\n\t\t\t\t\t: '')\r\n\t\t\t: '';\r\n\r\n\tctx.fillText(initials.toUpperCase(), canvas.width / 2, canvas.height / 2);\r\n\r\n\treturn canvas.toDataURL();\r\n};\r\n\r\nexport const formatDate = (inputDate) => {\r\n\tconst date = dayjs(inputDate);\r\n\tconst now = dayjs();\r\n\r\n\tif (date.isToday()) {\r\n\t\treturn `Today at ${date.format('LT')}`;\r\n\t} else if (date.isYesterday()) {\r\n\t\treturn `Yesterday at ${date.format('LT')}`;\r\n\t} else {\r\n\t\treturn `${date.format('L')} at ${date.format('LT')}`;\r\n\t}\r\n};\r\n\r\nexport const copyToClipboard = async (text) => {\r\n\tlet result = false;\r\n\tif (!navigator.clipboard) {\r\n\t\tconst textArea = document.createElement('textarea');\r\n\t\ttextArea.value = text;\r\n\r\n\t\t// Avoid scrolling to bottom\r\n\t\ttextArea.style.top = '0';\r\n\t\ttextArea.style.left = '0';\r\n\t\ttextArea.style.position = 'fixed';\r\n\r\n\t\tdocument.body.appendChild(textArea);\r\n\t\ttextArea.focus();\r\n\t\ttextArea.select();\r\n\r\n\t\ttry {\r\n\t\t\tconst successful = document.execCommand('copy');\r\n\t\t\tconst msg = successful ? 'successful' : 'unsuccessful';\r\n\t\t\tconsole.log('Fallback: Copying text command was ' + msg);\r\n\t\t\tresult = true;\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Fallback: Oops, unable to copy', err);\r\n\t\t}\r\n\r\n\t\tdocument.body.removeChild(textArea);\r\n\t\treturn result;\r\n\t}\r\n\r\n\tresult = await navigator.clipboard\r\n\t\t.writeText(text)\r\n\t\t.then(() => {\r\n\t\t\tconsole.log('Async: Copying to clipboard was successful!');\r\n\t\t\treturn true;\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error('Async: Could not copy text: ', error);\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\treturn result;\r\n};\r\n\r\nexport const compareVersion = (latest, current) => {\r\n\treturn current === '0.0.0'\r\n\t\t? false\r\n\t\t: current.localeCompare(latest, undefined, {\r\n\t\t\t\tnumeric: true,\r\n\t\t\t\tsensitivity: 'case',\r\n\t\t\t\tcaseFirst: 'upper'\r\n\t\t\t}) < 0;\r\n};\r\n\r\nexport const findWordIndices = (text) => {\r\n\tconst regex = /\\[([^\\]]+)\\]/g;\r\n\tconst matches = [];\r\n\tlet match;\r\n\r\n\twhile ((match = regex.exec(text)) !== null) {\r\n\t\tmatches.push({\r\n\t\t\tword: match[1],\r\n\t\t\tstartIndex: match.index,\r\n\t\t\tendIndex: regex.lastIndex - 1\r\n\t\t});\r\n\t}\r\n\r\n\treturn matches;\r\n};\r\n\r\nexport const removeLastWordFromString = (inputString, wordString) => {\r\n\tconsole.log('inputString', inputString);\r\n\t// Split the string by newline characters to handle lines separately\r\n\tconst lines = inputString.split('\\n');\r\n\r\n\t// Take the last line to operate only on it\r\n\tconst lastLine = lines.pop();\r\n\r\n\t// Split the last line into an array of words\r\n\tconst words = lastLine.split(' ');\r\n\r\n\t// Conditional to check for the last word removal\r\n\tif (words.at(-1) === wordString || (wordString === '' && words.at(-1) === '\\\\#')) {\r\n\t\twords.pop(); // Remove last word if condition is satisfied\r\n\t}\r\n\r\n\t// Join the remaining words back into a string and handle space correctly\r\n\tlet updatedLastLine = words.join(' ');\r\n\r\n\t// Add a trailing space to the updated last line if there are still words\r\n\tif (updatedLastLine !== '') {\r\n\t\tupdatedLastLine += ' ';\r\n\t}\r\n\r\n\t// Combine the lines together again, placing the updated last line back in\r\n\tconst resultString = [...lines, updatedLastLine].join('\\n');\r\n\r\n\t// Return the final string\r\n\tconsole.log('resultString', resultString);\r\n\r\n\treturn resultString;\r\n};\r\n\r\nexport const removeFirstHashWord = (inputString) => {\r\n\t// Split the string into an array of words\r\n\tconst words = inputString.split(' ');\r\n\r\n\t// Find the index of the first word that starts with #\r\n\tconst index = words.findIndex((word) => word.startsWith('#'));\r\n\r\n\t// Remove the first word with #\r\n\tif (index !== -1) {\r\n\t\twords.splice(index, 1);\r\n\t}\r\n\r\n\t// Join the remaining words back into a string\r\n\tconst resultString = words.join(' ');\r\n\r\n\treturn resultString;\r\n};\r\n\r\nexport const transformFileName = (fileName) => {\r\n\t// Convert to lowercase\r\n\tconst lowerCaseFileName = fileName.toLowerCase();\r\n\r\n\t// Remove special characters using regular expression\r\n\tconst sanitizedFileName = lowerCaseFileName.replace(/[^\\w\\s]/g, '');\r\n\r\n\t// Replace spaces with dashes\r\n\tconst finalFileName = sanitizedFileName.replace(/\\s+/g, '-');\r\n\r\n\treturn finalFileName;\r\n};\r\n\r\nexport const calculateSHA256 = async (file) => {\r\n\t// Create a FileReader to read the file asynchronously\r\n\tconst reader = new FileReader();\r\n\r\n\t// Define a promise to handle the file reading\r\n\tconst readFile = new Promise((resolve, reject) => {\r\n\t\treader.onload = () => resolve(reader.result);\r\n\t\treader.onerror = reject;\r\n\t});\r\n\r\n\t// Read the file as an ArrayBuffer\r\n\treader.readAsArrayBuffer(file);\r\n\r\n\ttry {\r\n\t\t// Wait for the FileReader to finish reading the file\r\n\t\tconst buffer = await readFile;\r\n\r\n\t\t// Convert the ArrayBuffer to a Uint8Array\r\n\t\tconst uint8Array = new Uint8Array(buffer);\r\n\r\n\t\t// Calculate the SHA-256 hash using Web Crypto API\r\n\t\tconst hashBuffer = await crypto.subtle.digest('SHA-256', uint8Array);\r\n\r\n\t\t// Convert the hash to a hexadecimal string\r\n\t\tconst hashArray = Array.from(new Uint8Array(hashBuffer));\r\n\t\tconst hashHex = hashArray.map((byte) => byte.toString(16).padStart(2, '0')).join('');\r\n\r\n\t\treturn `${hashHex}`;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error calculating SHA-256 hash:', error);\r\n\t\tthrow error;\r\n\t}\r\n};\r\n\r\nexport const getImportOrigin = (_chats) => {\r\n\t// Check what external service chat imports are from\r\n\tif ('mapping' in _chats[0]) {\r\n\t\treturn 'openai';\r\n\t}\r\n\treturn 'webui';\r\n};\r\n\r\nexport const getUserPosition = async (raw = false) => {\r\n\t// Get the user's location using the Geolocation API\r\n\tconst position = await new Promise((resolve, reject) => {\r\n\t\tnavigator.geolocation.getCurrentPosition(resolve, reject);\r\n\t}).catch((error) => {\r\n\t\tconsole.error('Error getting user location:', error);\r\n\t\tthrow error;\r\n\t});\r\n\r\n\tif (!position) {\r\n\t\treturn 'Location not available';\r\n\t}\r\n\r\n\t// Extract the latitude and longitude from the position\r\n\tconst { latitude, longitude } = position.coords;\r\n\r\n\tif (raw) {\r\n\t\treturn { latitude, longitude };\r\n\t} else {\r\n\t\treturn `${latitude.toFixed(3)}, ${longitude.toFixed(3)} (lat, long)`;\r\n\t}\r\n};\r\n\r\nconst convertOpenAIMessages = (convo) => {\r\n\t// Parse OpenAI chat messages and create chat dictionary for creating new chats\r\n\tconst mapping = convo['mapping'];\r\n\tconst messages = [];\r\n\tlet currentId = '';\r\n\tlet lastId = null;\r\n\r\n\tfor (const message_id in mapping) {\r\n\t\tconst message = mapping[message_id];\r\n\t\tcurrentId = message_id;\r\n\t\ttry {\r\n\t\t\tif (\r\n\t\t\t\tmessages.length == 0 &&\r\n\t\t\t\t(message['message'] == null ||\r\n\t\t\t\t\t(message['message']['content']['parts']?.[0] == '' &&\r\n\t\t\t\t\t\tmessage['message']['content']['text'] == null))\r\n\t\t\t) {\r\n\t\t\t\t// Skip chat messages with no content\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\tconst new_chat = {\r\n\t\t\t\t\tid: message_id,\r\n\t\t\t\t\tparentId: lastId,\r\n\t\t\t\t\tchildrenIds: message['children'] || [],\r\n\t\t\t\t\trole: message['message']?.['author']?.['role'] !== 'user' ? 'assistant' : 'user',\r\n\t\t\t\t\tcontent:\r\n\t\t\t\t\t\tmessage['message']?.['content']?.['parts']?.[0] ||\r\n\t\t\t\t\t\tmessage['message']?.['content']?.['text'] ||\r\n\t\t\t\t\t\t'',\r\n\t\t\t\t\tmodel: 'gpt-3.5-turbo',\r\n\t\t\t\t\tdone: true,\r\n\t\t\t\t\tcontext: null\r\n\t\t\t\t};\r\n\t\t\t\tmessages.push(new_chat);\r\n\t\t\t\tlastId = currentId;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('Error with', message, '\\nError:', error);\r\n\t\t}\r\n\t}\r\n\r\n\tconst history: Record<PropertyKey, (typeof messages)[number]> = {};\r\n\tmessages.forEach((obj) => (history[obj.id] = obj));\r\n\r\n\tconst chat = {\r\n\t\thistory: {\r\n\t\t\tcurrentId: currentId,\r\n\t\t\tmessages: history // Need to convert this to not a list and instead a json object\r\n\t\t},\r\n\t\tmodels: ['gpt-3.5-turbo'],\r\n\t\tmessages: messages,\r\n\t\toptions: {},\r\n\t\ttimestamp: convo['create_time'],\r\n\t\ttitle: convo['title'] ?? 'New Chat'\r\n\t};\r\n\treturn chat;\r\n};\r\n\r\nconst validateChat = (chat) => {\r\n\t// Because ChatGPT sometimes has features we can't use like DALL-E or might have corrupted messages, need to validate\r\n\tconst messages = chat.messages;\r\n\r\n\t// Check if messages array is empty\r\n\tif (messages.length === 0) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Last message's children should be an empty array\r\n\tconst lastMessage = messages[messages.length - 1];\r\n\tif (lastMessage.childrenIds.length !== 0) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// First message's parent should be null\r\n\tconst firstMessage = messages[0];\r\n\tif (firstMessage.parentId !== null) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Every message's content should be a string\r\n\tfor (const message of messages) {\r\n\t\tif (typeof message.content !== 'string') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nexport const convertOpenAIChats = (_chats) => {\r\n\t// Create a list of dictionaries with each conversation from import\r\n\tconst chats = [];\r\n\tlet failed = 0;\r\n\tfor (const convo of _chats) {\r\n\t\tconst chat = convertOpenAIMessages(convo);\r\n\r\n\t\tif (validateChat(chat)) {\r\n\t\t\tchats.push({\r\n\t\t\t\tid: convo['id'],\r\n\t\t\t\tuser_id: '',\r\n\t\t\t\ttitle: convo['title'],\r\n\t\t\t\tchat: chat,\r\n\t\t\t\ttimestamp: convo['timestamp']\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tfailed++;\r\n\t\t}\r\n\t}\r\n\tconsole.log(failed, 'Conversations could not be imported');\r\n\treturn chats;\r\n};\r\n\r\nexport const isValidHttpUrl = (string: string) => {\r\n\tlet url;\r\n\r\n\ttry {\r\n\t\turl = new URL(string);\r\n\t} catch (_) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn url.protocol === 'http:' || url.protocol === 'https:';\r\n};\r\n\r\nexport const removeEmojis = (str: string) => {\r\n\t// Regular expression to match emojis\r\n\tconst emojiRegex = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g;\r\n\r\n\t// Replace emojis with an empty string\r\n\treturn str.replace(emojiRegex, '');\r\n};\r\n\r\nexport const removeFormattings = (str: string) => {\r\n\treturn (\r\n\t\tstr\r\n\t\t\t// Block elements (remove completely)\r\n\t\t\t.replace(/(```[\\s\\S]*?```)/g, '') // Code blocks\r\n\t\t\t.replace(/^\\|.*\\|$/gm, '') // Tables\r\n\t\t\t// Inline elements (preserve content)\r\n\t\t\t.replace(/(?:\\*\\*|__)(.*?)(?:\\*\\*|__)/g, '$1') // Bold\r\n\t\t\t.replace(/(?:[*_])(.*?)(?:[*_])/g, '$1') // Italic\r\n\t\t\t.replace(/~~(.*?)~~/g, '$1') // Strikethrough\r\n\t\t\t.replace(/`([^`]+)`/g, '$1') // Inline code\r\n\r\n\t\t\t// Links and images\r\n\t\t\t.replace(/!?\\[([^\\]]*)\\](?:\\([^)]+\\)|\\[[^\\]]*\\])/g, '$1') // Links & images\r\n\t\t\t.replace(/^\\[[^\\]]+\\]:\\s*.*$/gm, '') // Reference definitions\r\n\r\n\t\t\t// Block formatting\r\n\t\t\t.replace(/^#{1,6}\\s+/gm, '') // Headers\r\n\t\t\t.replace(/^\\s*[-*+]\\s+/gm, '') // Lists\r\n\t\t\t.replace(/^\\s*(?:\\d+\\.)\\s+/gm, '') // Numbered lists\r\n\t\t\t.replace(/^\\s*>[> ]*/gm, '') // Blockquotes\r\n\t\t\t.replace(/^\\s*:\\s+/gm, '') // Definition lists\r\n\r\n\t\t\t// Cleanup\r\n\t\t\t.replace(/\\[\\^[^\\]]*\\]/g, '') // Footnotes\r\n\t\t\t.replace(/[-*_~]/g, '') // Remaining markers\r\n\t\t\t.replace(/\\n{2,}/g, '\\n')\r\n\t); // Multiple newlines\r\n};\r\n\r\nexport const cleanText = (content: string) => {\r\n\treturn removeFormattings(removeEmojis(content.trim()));\r\n};\r\n\r\nexport const removeDetails = (content, types) => {\r\n\tfor (const type of types) {\r\n\t\tcontent = content.replace(\r\n\t\t\tnew RegExp(`<details\\\\s+type=\"${type}\"[^>]*>.*?<\\\\/details>`, 'gis'),\r\n\t\t\t''\r\n\t\t);\r\n\t}\r\n\r\n\treturn content;\r\n};\r\n\r\n// This regular expression matches code blocks marked by triple backticks\r\nconst codeBlockRegex = /```[\\s\\S]*?```/g;\r\n\r\nexport const extractSentences = (text: string) => {\r\n\tconst codeBlocks: string[] = [];\r\n\tlet index = 0;\r\n\r\n\t// Temporarily replace code blocks with placeholders and store the blocks separately\r\n\ttext = text.replace(codeBlockRegex, (match) => {\r\n\t\tconst placeholder = `\\u0000${index}\\u0000`; // Use a unique placeholder\r\n\t\tcodeBlocks[index++] = match;\r\n\t\treturn placeholder;\r\n\t});\r\n\r\n\t// Split the modified text into sentences based on common punctuation marks, avoiding these blocks\r\n\tlet sentences = text.split(/(?<=[.!?])\\s+/);\r\n\r\n\t// Restore code blocks and process sentences\r\n\tsentences = sentences.map((sentence) => {\r\n\t\t// Check if the sentence includes a placeholder for a code block\r\n\t\treturn sentence.replace(/\\u0000(\\d+)\\u0000/g, (_, idx) => codeBlocks[idx]);\r\n\t});\r\n\r\n\treturn sentences.map(cleanText).filter(Boolean);\r\n};\r\n\r\nexport const extractParagraphsForAudio = (text: string) => {\r\n\tconst codeBlocks: string[] = [];\r\n\tlet index = 0;\r\n\r\n\t// Temporarily replace code blocks with placeholders and store the blocks separately\r\n\ttext = text.replace(codeBlockRegex, (match) => {\r\n\t\tconst placeholder = `\\u0000${index}\\u0000`; // Use a unique placeholder\r\n\t\tcodeBlocks[index++] = match;\r\n\t\treturn placeholder;\r\n\t});\r\n\r\n\t// Split the modified text into paragraphs based on newlines, avoiding these blocks\r\n\tlet paragraphs = text.split(/\\n+/);\r\n\r\n\t// Restore code blocks and process paragraphs\r\n\tparagraphs = paragraphs.map((paragraph) => {\r\n\t\t// Check if the paragraph includes a placeholder for a code block\r\n\t\treturn paragraph.replace(/\\u0000(\\d+)\\u0000/g, (_, idx) => codeBlocks[idx]);\r\n\t});\r\n\r\n\treturn paragraphs.map(cleanText).filter(Boolean);\r\n};\r\n\r\nexport const extractSentencesForAudio = (text: string) => {\r\n\treturn extractSentences(text).reduce((mergedTexts, currentText) => {\r\n\t\tconst lastIndex = mergedTexts.length - 1;\r\n\t\tif (lastIndex >= 0) {\r\n\t\t\tconst previousText = mergedTexts[lastIndex];\r\n\t\t\tconst wordCount = previousText.split(/\\s+/).length;\r\n\t\t\tconst charCount = previousText.length;\r\n\t\t\tif (wordCount < 4 || charCount < 50) {\r\n\t\t\t\tmergedTexts[lastIndex] = previousText + ' ' + currentText;\r\n\t\t\t} else {\r\n\t\t\t\tmergedTexts.push(currentText);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmergedTexts.push(currentText);\r\n\t\t}\r\n\t\treturn mergedTexts;\r\n\t}, [] as string[]);\r\n};\r\n\r\nexport const getMessageContentParts = (content: string, split_on: string = 'punctuation') => {\r\n\tcontent = removeDetails(content, ['reasoning', 'code_interpreter']);\r\n\tconst messageContentParts: string[] = [];\r\n\r\n\tswitch (split_on) {\r\n\t\tdefault:\r\n\t\tcase TTS_RESPONSE_SPLIT.PUNCTUATION:\r\n\t\t\tmessageContentParts.push(...extractSentencesForAudio(content));\r\n\t\t\tbreak;\r\n\t\tcase TTS_RESPONSE_SPLIT.PARAGRAPHS:\r\n\t\t\tmessageContentParts.push(...extractParagraphsForAudio(content));\r\n\t\t\tbreak;\r\n\t\tcase TTS_RESPONSE_SPLIT.NONE:\r\n\t\t\tmessageContentParts.push(cleanText(content));\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn messageContentParts;\r\n};\r\n\r\nexport const blobToFile = (blob, fileName) => {\r\n\t// Create a new File object from the Blob\r\n\tconst file = new File([blob], fileName, { type: blob.type });\r\n\treturn file;\r\n};\r\n\r\nexport const getPromptVariables = (user_name, user_location) => {\r\n\treturn {\r\n\t\t'{{USER_NAME}}': user_name,\r\n\t\t'{{USER_LOCATION}}': user_location || 'Unknown',\r\n\t\t'{{CURRENT_DATETIME}}': getCurrentDateTime(),\r\n\t\t'{{CURRENT_DATE}}': getFormattedDate(),\r\n\t\t'{{CURRENT_TIME}}': getFormattedTime(),\r\n\t\t'{{CURRENT_WEEKDAY}}': getWeekday(),\r\n\t\t'{{CURRENT_TIMEZONE}}': getUserTimezone(),\r\n\t\t'{{USER_LANGUAGE}}': localStorage.getItem('locale') || 'en-US'\r\n\t};\r\n};\r\n\r\n/**\r\n * @param {string} template - The template string containing placeholders.\r\n * @returns {string} The template string with the placeholders replaced by the prompt.\r\n */\r\nexport const promptTemplate = (\r\n\ttemplate: string,\r\n\tuser_name?: string,\r\n\tuser_location?: string\r\n): string => {\r\n\t// Get the current date\r\n\tconst currentDate = new Date();\r\n\r\n\t// Format the date to YYYY-MM-DD\r\n\tconst formattedDate =\r\n\t\tcurrentDate.getFullYear() +\r\n\t\t'-' +\r\n\t\tString(currentDate.getMonth() + 1).padStart(2, '0') +\r\n\t\t'-' +\r\n\t\tString(currentDate.getDate()).padStart(2, '0');\r\n\r\n\t// Format the time to HH:MM:SS AM/PM\r\n\tconst currentTime = currentDate.toLocaleTimeString('en-US', {\r\n\t\thour: 'numeric',\r\n\t\tminute: 'numeric',\r\n\t\tsecond: 'numeric',\r\n\t\thour12: true\r\n\t});\r\n\r\n\t// Get the current weekday\r\n\tconst currentWeekday = getWeekday();\r\n\r\n\t// Get the user's timezone\r\n\tconst currentTimezone = getUserTimezone();\r\n\r\n\t// Get the user's language\r\n\tconst userLanguage = localStorage.getItem('locale') || 'en-US';\r\n\r\n\t// Replace {{CURRENT_DATETIME}} in the template with the formatted datetime\r\n\ttemplate = template.replace('{{CURRENT_DATETIME}}', `${formattedDate} ${currentTime}`);\r\n\r\n\t// Replace {{CURRENT_DATE}} in the template with the formatted date\r\n\ttemplate = template.replace('{{CURRENT_DATE}}', formattedDate);\r\n\r\n\t// Replace {{CURRENT_TIME}} in the template with the formatted time\r\n\ttemplate = template.replace('{{CURRENT_TIME}}', currentTime);\r\n\r\n\t// Replace {{CURRENT_WEEKDAY}} in the template with the current weekday\r\n\ttemplate = template.replace('{{CURRENT_WEEKDAY}}', currentWeekday);\r\n\r\n\t// Replace {{CURRENT_TIMEZONE}} in the template with the user's timezone\r\n\ttemplate = template.replace('{{CURRENT_TIMEZONE}}', currentTimezone);\r\n\r\n\t// Replace {{USER_LANGUAGE}} in the template with the user's language\r\n\ttemplate = template.replace('{{USER_LANGUAGE}}', userLanguage);\r\n\r\n\tif (user_name) {\r\n\t\t// Replace {{USER_NAME}} in the template with the user's name\r\n\t\ttemplate = template.replace('{{USER_NAME}}', user_name);\r\n\t}\r\n\r\n\tif (user_location) {\r\n\t\t// Replace {{USER_LOCATION}} in the template with the current location\r\n\t\ttemplate = template.replace('{{USER_LOCATION}}', user_location);\r\n\t}\r\n\r\n\treturn template;\r\n};\r\n\r\n/**\r\n * This function is used to replace placeholders in a template string with the provided prompt.\r\n * The placeholders can be in the following formats:\r\n * - `{{prompt}}`: This will be replaced with the entire prompt.\r\n * - `{{prompt:start:<length>}}`: This will be replaced with the first <length> characters of the prompt.\r\n * - `{{prompt:end:<length>}}`: This will be replaced with the last <length> characters of the prompt.\r\n * - `{{prompt:middletruncate:<length>}}`: This will be replaced with the prompt truncated to <length> characters, with '...' in the middle.\r\n *\r\n * @param {string} template - The template string containing placeholders.\r\n * @param {string} prompt - The string to replace the placeholders with.\r\n * @returns {string} The template string with the placeholders replaced by the prompt.\r\n */\r\nexport const titleGenerationTemplate = (template: string, prompt: string): string => {\r\n\ttemplate = template.replace(\r\n\t\t/{{prompt}}|{{prompt:start:(\\d+)}}|{{prompt:end:(\\d+)}}|{{prompt:middletruncate:(\\d+)}}/g,\r\n\t\t(match, startLength, endLength, middleLength) => {\r\n\t\t\tif (match === '{{prompt}}') {\r\n\t\t\t\treturn prompt;\r\n\t\t\t} else if (match.startsWith('{{prompt:start:')) {\r\n\t\t\t\treturn prompt.substring(0, startLength);\r\n\t\t\t} else if (match.startsWith('{{prompt:end:')) {\r\n\t\t\t\treturn prompt.slice(-endLength);\r\n\t\t\t} else if (match.startsWith('{{prompt:middletruncate:')) {\r\n\t\t\t\tif (prompt.length <= middleLength) {\r\n\t\t\t\t\treturn prompt;\r\n\t\t\t\t}\r\n\t\t\t\tconst start = prompt.slice(0, Math.ceil(middleLength / 2));\r\n\t\t\t\tconst end = prompt.slice(-Math.floor(middleLength / 2));\r\n\t\t\t\treturn `${start}...${end}`;\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t}\r\n\t);\r\n\r\n\ttemplate = promptTemplate(template);\r\n\r\n\treturn template;\r\n};\r\n\r\nexport const approximateToHumanReadable = (nanoseconds: number) => {\r\n\tconst seconds = Math.floor((nanoseconds / 1e9) % 60);\r\n\tconst minutes = Math.floor((nanoseconds / 6e10) % 60);\r\n\tconst hours = Math.floor((nanoseconds / 3.6e12) % 24);\r\n\r\n\tconst results: string[] = [];\r\n\r\n\tif (seconds >= 0) {\r\n\t\tresults.push(`${seconds}s`);\r\n\t}\r\n\r\n\tif (minutes > 0) {\r\n\t\tresults.push(`${minutes}m`);\r\n\t}\r\n\r\n\tif (hours > 0) {\r\n\t\tresults.push(`${hours}h`);\r\n\t}\r\n\r\n\treturn results.reverse().join(' ');\r\n};\r\n\r\nexport const getTimeRange = (timestamp) => {\r\n\tconst now = new Date();\r\n\tconst date = new Date(timestamp * 1000); // Convert Unix timestamp to milliseconds\r\n\r\n\t// Calculate the difference in milliseconds\r\n\tconst diffTime = now.getTime() - date.getTime();\r\n\tconst diffDays = diffTime / (1000 * 3600 * 24);\r\n\r\n\tconst nowDate = now.getDate();\r\n\tconst nowMonth = now.getMonth();\r\n\tconst nowYear = now.getFullYear();\r\n\r\n\tconst dateDate = date.getDate();\r\n\tconst dateMonth = date.getMonth();\r\n\tconst dateYear = date.getFullYear();\r\n\r\n\tif (nowYear === dateYear && nowMonth === dateMonth && nowDate === dateDate) {\r\n\t\treturn 'Today';\r\n\t} else if (nowYear === dateYear && nowMonth === dateMonth && nowDate - dateDate === 1) {\r\n\t\treturn 'Yesterday';\r\n\t} else if (diffDays <= 7) {\r\n\t\treturn 'Previous 7 days';\r\n\t} else if (diffDays <= 30) {\r\n\t\treturn 'Previous 30 days';\r\n\t} else if (nowYear === dateYear) {\r\n\t\treturn date.toLocaleString('default', { month: 'long' });\r\n\t} else {\r\n\t\treturn date.getFullYear().toString();\r\n\t}\r\n};\r\n\r\n/**\r\n * Extract frontmatter as a dictionary from the specified content string.\r\n * @param content {string} - The content string with potential frontmatter.\r\n * @returns {Object} - The extracted frontmatter as a dictionary.\r\n */\r\nexport const extractFrontmatter = (content) => {\r\n\tconst frontmatter = {};\r\n\tlet frontmatterStarted = false;\r\n\tlet frontmatterEnded = false;\r\n\tconst frontmatterPattern = /^\\s*([a-z_]+):\\s*(.*)\\s*$/i;\r\n\r\n\t// Split content into lines\r\n\tconst lines = content.split('\\n');\r\n\r\n\t// Check if the content starts with triple quotes\r\n\tif (lines[0].trim() !== '\"\"\"') {\r\n\t\treturn {};\r\n\t}\r\n\r\n\tfrontmatterStarted = true;\r\n\r\n\tfor (let i = 1; i < lines.length; i++) {\r\n\t\tconst line = lines[i];\r\n\r\n\t\tif (line.includes('\"\"\"')) {\r\n\t\t\tif (frontmatterStarted) {\r\n\t\t\t\tfrontmatterEnded = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (frontmatterStarted && !frontmatterEnded) {\r\n\t\t\tconst match = frontmatterPattern.exec(line);\r\n\t\t\tif (match) {\r\n\t\t\t\tconst [, key, value] = match;\r\n\t\t\t\tfrontmatter[key.trim()] = value.trim();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn frontmatter;\r\n};\r\n\r\n// Function to determine the best matching language\r\nexport const bestMatchingLanguage = (supportedLanguages, preferredLanguages, defaultLocale) => {\r\n\tconst languages = supportedLanguages.map((lang) => lang.code);\r\n\r\n\tconst match = preferredLanguages\r\n\t\t.map((prefLang) => languages.find((lang) => lang.startsWith(prefLang)))\r\n\t\t.find(Boolean);\r\n\r\n\treturn match || defaultLocale;\r\n};\r\n\r\n// Get the date in the format YYYY-MM-DD\r\nexport const getFormattedDate = () => {\r\n\tconst date = new Date();\r\n\tconst year = date.getFullYear();\r\n\tconst month = String(date.getMonth() + 1).padStart(2, '0');\r\n\tconst day = String(date.getDate()).padStart(2, '0');\r\n\treturn `${year}-${month}-${day}`;\r\n};\r\n\r\n// Get the time in the format HH:MM:SS\r\nexport const getFormattedTime = () => {\r\n\tconst date = new Date();\r\n\treturn date.toTimeString().split(' ')[0];\r\n};\r\n\r\n// Get the current date and time in the format YYYY-MM-DD HH:MM:SS\r\nexport const getCurrentDateTime = () => {\r\n\treturn `${getFormattedDate()} ${getFormattedTime()}`;\r\n};\r\n\r\n// Get the user's timezone\r\nexport const getUserTimezone = () => {\r\n\treturn Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n};\r\n\r\n// Get the weekday\r\nexport const getWeekday = () => {\r\n\tconst date = new Date();\r\n\tconst weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n\treturn weekdays[date.getDay()];\r\n};\r\n\r\nexport const createMessagesList = (history, messageId) => {\r\n\tif (messageId === null) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tconst message = history.messages[messageId];\r\n\tif (message?.parentId) {\r\n\t\treturn [...createMessagesList(history, message.parentId), message];\r\n\t} else {\r\n\t\treturn [message];\r\n\t}\r\n};\r\n\r\nexport const formatFileSize = (size) => {\r\n\tif (size == null) return 'Unknown size';\r\n\tif (typeof size !== 'number' || size < 0) return 'Invalid size';\r\n\tif (size === 0) return '0 B';\r\n\tconst units = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n\tlet unitIndex = 0;\r\n\r\n\twhile (size >= 1024 && unitIndex < units.length - 1) {\r\n\t\tsize /= 1024;\r\n\t\tunitIndex++;\r\n\t}\r\n\treturn `${size.toFixed(1)} ${units[unitIndex]}`;\r\n};\r\n\r\nexport const getLineCount = (text) => {\r\n\tconsole.log(typeof text);\r\n\treturn text ? text.split('\\n').length : 0;\r\n};\r\n"],"names":["getRandomValues","rnds8","rng","byteToHex","i","unsafeStringify","arr","offset","randomUUID","native","v4","options","buf","rnds","__viteBrowserExternal","ERROR","WINDOW","root","WEB_WORKER","NODE_JS","global","COMMON_JS","module","ARRAY_BUFFER","HEX_CHARS","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","obj","createOutputMethod","outputType","is224","message","Sha256","createMethod","method","nodeWrap","type","crypto","require$$0","Buffer","require$$1","algorithm","bufferFrom","nodeMethod","createHmacOutputMethod","key","HmacSha256","createHmacMethod","sharedMemory","notString","code","index","length","a","b","c","d","e","f","h","j","s0","s1","maj","t1","t2","ch","ab","da","cd","bc","h0","h1","h2","h3","h4","h5","h6","h7","hex","buffer","dataView","bytes","oKeyPad","iKeyPad","innerHash","exports","o","this","t","n","r","TTS_RESPONSE_SPLIT","dayjs","relativeTime","isToday","isYesterday","localizedFormat","replaceTokens","content","sourceIds","char","user","charToken","userToken","videoIdToken","htmlIdToken","match","fileId","WEBUI_BASE_URL","sourceId","idx","sourceToken","sourceRegex","sanitizeResponseContent","processResponseContent","unescapeHtml","html","capitalizeFirstLetter","string","splitStream","splitOn","chunk","controller","parts","part","convertMessagesToHistory","messages","history","parentMessageId","messageId","uuidv4","canvasPixelTest","canvas","ctx","imageData","pixelValues","p","compressImage","imageUrl","maxWidth","maxHeight","resolve","reject","img","width","height","compressedUrl","error","generateInitialsImage","name","sanitizedName","initials","formatDate","inputDate","date","copyToClipboard","text","result","textArea","msg","err","compareVersion","latest","current","findWordIndices","regex","matches","removeLastWordFromString","inputString","wordString","lines","words","updatedLastLine","resultString","getImportOrigin","_chats","getUserPosition","raw","position","latitude","longitude","convertOpenAIMessages","convo","mapping","currentId","lastId","message_id","_a","new_chat","_c","_b","_f","_e","_d","_h","_g","validateChat","chat","convertOpenAIChats","chats","failed","isValidHttpUrl","url","removeEmojis","str","emojiRegex","removeFormattings","cleanText","removeDetails","types","codeBlockRegex","extractSentences","codeBlocks","placeholder","sentences","sentence","_","extractParagraphsForAudio","paragraphs","paragraph","extractSentencesForAudio","mergedTexts","currentText","lastIndex","previousText","wordCount","charCount","getMessageContentParts","split_on","messageContentParts","blobToFile","blob","fileName","getPromptVariables","user_name","user_location","getCurrentDateTime","getFormattedDate","getFormattedTime","getWeekday","getUserTimezone","promptTemplate","template","currentDate","formattedDate","currentTime","currentWeekday","currentTimezone","userLanguage","getTimeRange","timestamp","now","diffDays","nowDate","nowMonth","nowYear","dateDate","dateMonth","dateYear","extractFrontmatter","frontmatter","frontmatterStarted","frontmatterEnded","frontmatterPattern","line","value","bestMatchingLanguage","supportedLanguages","preferredLanguages","defaultLocale","languages","lang","prefLang","year","month","day","createMessagesList","formatFileSize","size","units","unitIndex","getLineCount"],"mappings":"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","x_google_ignoreList":[0,1,2,3,5,6,7,8]}