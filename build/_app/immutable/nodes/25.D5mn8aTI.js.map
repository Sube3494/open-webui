{"version":3,"file":"25.D5mn8aTI.js","sources":["../../../../../../src/lib/components/icons/ArrowUpCircle.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/Files.svelte","../../../../../../src/lib/components/icons/BarsArrowUp.svelte","../../../../../../src/lib/components/icons/ArrowPath.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/AddContentMenu.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/AddTextContentModal.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase.svelte"],"sourcesContent":["<script lang=\"ts\">\r\n\texport let className = 'size-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from 'svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport FileItem from '$lib/components/common/FileItem.svelte';\r\n\r\n\texport let selectedFileId = null;\r\n\texport let files = [];\r\n\r\n\texport let small = false;\r\n</script>\r\n\r\n<div class=\" max-h-full flex flex-col w-full\">\r\n\t{#each files as file}\r\n\t\t<div class=\"mt-1 px-2\">\r\n\t\t\t<FileItem\r\n\t\t\t\tclassName=\"w-full\"\r\n\t\t\t\tcolorClassName=\"{selectedFileId === file.id\r\n\t\t\t\t\t? ' bg-gray-50 dark:bg-gray-850'\r\n\t\t\t\t\t: 'bg-transparent'} hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\r\n\t\t\t\t{small}\r\n\t\t\t\titem={file}\r\n\t\t\t\tname={file?.name ?? file?.meta?.name}\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\tsize={file?.size ?? file?.meta?.size ?? ''}\r\n\t\t\t\tloading={file.status === 'uploading'}\r\n\t\t\t\tdismissible\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tif (file.status === 'uploading') {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdispatch('click', file.id);\r\n\t\t\t\t}}\r\n\t\t\t\ton:dismiss={() => {\r\n\t\t\t\t\tif (file.status === 'uploading') {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdispatch('delete', file.id);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t{/each}\r\n</div>\r\n","<script lang=\"ts\">\r\n\texport let className = 'size-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\texport let className = 'size-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { DropdownMenu } from 'bits-ui';\r\n\timport { flyAndScale } from '$lib/utils/transitions';\r\n\timport { getContext, createEventDispatcher } from 'svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport ArrowUpCircle from '$lib/components/icons/ArrowUpCircle.svelte';\r\n\timport BarsArrowUp from '$lib/components/icons/BarsArrowUp.svelte';\r\n\timport FolderOpen from '$lib/components/icons/FolderOpen.svelte';\r\n\timport ArrowPath from '$lib/components/icons/ArrowPath.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let onClose: Function = () => {};\r\n\r\n\tlet show = false;\r\n</script>\r\n\r\n<Dropdown\r\n\tbind:show\r\n\ton:change={(e) => {\r\n\t\tif (e.detail === false) {\r\n\t\t\tonClose();\r\n\t\t}\r\n\t}}\r\n\talign=\"end\"\r\n>\r\n\t<Tooltip content={$i18n.t('Add Content')}>\r\n\t\t<button\r\n\t\t\tclass=\" p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1\"\r\n\t\t\ton:click={(e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tshow = true;\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\td=\"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t</button>\r\n\t</Tooltip>\r\n\r\n\t<div slot=\"content\">\r\n\t\t<DropdownMenu.Content\r\n\t\t\tclass=\"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm\"\r\n\t\t\tsideOffset={4}\r\n\t\t\tside=\"bottom\"\r\n\t\t\talign=\"end\"\r\n\t\t\ttransition={flyAndScale}\r\n\t\t>\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tdispatch('upload', { type: 'files' });\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ArrowUpCircle strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload files')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tdispatch('upload', { type: 'directory' });\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<FolderOpen strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload directory')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<Tooltip\r\n\t\t\t\tcontent={$i18n.t(\r\n\t\t\t\t\t'This option will delete all existing files in the collection and replace them with newly uploaded files.'\r\n\t\t\t\t)}\r\n\t\t\t\tclassName=\"w-full\"\r\n\t\t\t>\r\n\t\t\t\t<DropdownMenu.Item\r\n\t\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tdispatch('sync', { type: 'directory' });\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ArrowPath strokeWidth=\"2\" />\r\n\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Sync directory')}</div>\r\n\t\t\t\t</DropdownMenu.Item>\r\n\t\t\t</Tooltip>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tdispatch('upload', { type: 'text' });\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<BarsArrowUp strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Add text content')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\t\t</DropdownMenu.Content>\r\n\t</div>\r\n</Dropdown>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport dayjs from 'dayjs';\r\n\r\n\timport { onMount, getContext, createEventDispatcher } from 'svelte';\r\n\tconst i18n = getContext('i18n');\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\timport RichTextInput from '$lib/components/common/RichTextInput.svelte';\r\n\timport XMark from '$lib/components/icons/XMark.svelte';\r\n\timport Mic from '$lib/components/icons/Mic.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport VoiceRecording from '$lib/components/chat/MessageInput/VoiceRecording.svelte';\r\n\texport let show = false;\r\n\r\n\tlet name = 'Untitled';\r\n\tlet content = '';\r\n\r\n\tlet voiceInput = false;\r\n</script>\r\n\r\n<Modal size=\"full\" containerClassName=\"\" className=\"h-full bg-white dark:bg-gray-900\" bind:show>\r\n\t<div class=\"absolute top-0 right-0 p-5\">\r\n\t\t<button\r\n\t\t\tclass=\"self-center dark:text-white\"\r\n\t\t\ttype=\"button\"\r\n\t\t\ton:click={() => {\r\n\t\t\t\tshow = false;\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<XMark className=\"size-3.5\" />\r\n\t\t</button>\r\n\t</div>\r\n\t<div class=\"flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200\">\r\n\t\t<form\r\n\t\t\tclass=\"flex flex-col w-full h-full\"\r\n\t\t\ton:submit|preventDefault={() => {\r\n\t\t\t\tif (name.trim() === '' || content.trim() === '') {\r\n\t\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\r\n\t\t\t\t\tname = name.trim();\r\n\t\t\t\t\tcontent = content.trim();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdispatch('submit', {\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tcontent\r\n\t\t\t\t});\r\n\t\t\t\tshow = false;\r\n\t\t\t\tname = '';\r\n\t\t\t\tcontent = '';\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div class=\" flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4\">\r\n\t\t\t\t<div class=\" max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2\">\r\n\t\t\t\t\t<div class=\"shrink-0 w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\"w-full\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclass=\"w-full text-3xl font-semibold bg-transparent outline-hidden\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tbind:value={name}\r\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Title')}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\" flex-1 w-full h-full\">\r\n\t\t\t\t\t\t<RichTextInput\r\n\t\t\t\t\t\t\tbind:value={content}\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Write something...')}\r\n\t\t\t\t\t\t\tpreserveBreaks={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclass=\"flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t{#if voiceInput}\r\n\t\t\t\t\t\t<div class=\" max-w-full w-full\">\r\n\t\t\t\t\t\t\t<VoiceRecording\r\n\t\t\t\t\t\t\t\tbind:recording={voiceInput}\r\n\t\t\t\t\t\t\t\tclassName=\"p-1\"\r\n\t\t\t\t\t\t\t\ton:cancel={() => {\r\n\t\t\t\t\t\t\t\t\tvoiceInput = false;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ton:confirm={(e) => {\r\n\t\t\t\t\t\t\t\t\tconst { text, filename } = e.detail;\r\n\t\t\t\t\t\t\t\t\tcontent = `${content}${text} `;\r\n\r\n\t\t\t\t\t\t\t\t\tvoiceInput = false;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Voice Input')}>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\" p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full\"\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\r\n\t\t\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\r\n\t\t\t\t\t\t\t\t\t\t\t.catch(function (err) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terror: err\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (stream) {\r\n\t\t\t\t\t\t\t\t\t\t\tvoiceInput = true;\r\n\t\t\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\r\n\t\t\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tstream = null;\r\n\t\t\t\t\t\t\t\t\t} catch {\r\n\t\t\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Mic className=\"size-5\" />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\" shrink-0\">\r\n\t\t\t\t\t<Tooltip content={$i18n.t('Save')}>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{$i18n.t('Save')}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t</div>\r\n</Modal>\r\n\r\n<style>\r\n\tinput::-webkit-outer-spin-button,\r\n\tinput::-webkit-inner-spin-button {\r\n\t\t/* display: none; <- Crashes Chrome on hover */\r\n\t\t-webkit-appearance: none;\r\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\r\n\t}\r\n\r\n\t.tabs::-webkit-scrollbar {\r\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\r\n\t}\r\n\r\n\t.tabs {\r\n\t\t-ms-overflow-style: none; /* IE and Edge */\r\n\t\tscrollbar-width: none; /* Firefox */\r\n\t}\r\n\r\n\tinput[type='number'] {\r\n\t\t-moz-appearance: textfield; /* Firefox */\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport Fuse from 'fuse.js';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { v4 as uuidv4 } from 'uuid';\r\n\timport { PaneGroup, Pane, PaneResizer } from 'paneforge';\r\n\r\n\timport { onMount, getContext, onDestroy, tick } from 'svelte';\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport { goto } from '$app/navigation';\r\n\timport { page } from '$app/stores';\r\n\timport { mobile, showSidebar, knowledge as _knowledge } from '$lib/stores';\r\n\r\n\timport { updateFileDataContentById, uploadFile, deleteFileById } from '$lib/apis/files';\r\n\timport {\r\n\t\taddFileToKnowledgeById,\r\n\t\tgetKnowledgeById,\r\n\t\tgetKnowledgeBases,\r\n\t\tremoveFileFromKnowledgeById,\r\n\t\tresetKnowledgeById,\r\n\t\tupdateFileFromKnowledgeById,\r\n\t\tupdateKnowledgeById\r\n\t} from '$lib/apis/knowledge';\r\n\r\n\timport { transcribeAudio } from '$lib/apis/audio';\r\n\timport { blobToFile } from '$lib/utils';\r\n\timport { processFile } from '$lib/apis/retrieval';\r\n\r\n\timport Spinner from '$lib/components/common/Spinner.svelte';\r\n\timport Files from './KnowledgeBase/Files.svelte';\r\n\timport AddFilesPlaceholder from '$lib/components/AddFilesPlaceholder.svelte';\r\n\r\n\timport AddContentMenu from './KnowledgeBase/AddContentMenu.svelte';\r\n\timport AddTextContentModal from './KnowledgeBase/AddTextContentModal.svelte';\r\n\r\n\timport SyncConfirmDialog from '../../common/ConfirmDialog.svelte';\r\n\timport RichTextInput from '$lib/components/common/RichTextInput.svelte';\r\n\timport EllipsisVertical from '$lib/components/icons/EllipsisVertical.svelte';\r\n\timport Drawer from '$lib/components/common/Drawer.svelte';\r\n\timport ChevronLeft from '$lib/components/icons/ChevronLeft.svelte';\r\n\timport LockClosed from '$lib/components/icons/LockClosed.svelte';\r\n\timport AccessControlModal from '../common/AccessControlModal.svelte';\r\n\r\n\tlet largeScreen = true;\r\n\r\n\tlet pane;\r\n\tlet showSidepanel = true;\r\n\tlet minSize = 0;\r\n\r\n\ttype Knowledge = {\r\n\t\tid: string;\r\n\t\tname: string;\r\n\t\tdescription: string;\r\n\t\tdata: {\r\n\t\t\tfile_ids: string[];\r\n\t\t};\r\n\t\tfiles: any[];\r\n\t};\r\n\r\n\tlet id = null;\r\n\tlet knowledge: Knowledge | null = null;\r\n\tlet query = '';\r\n\r\n\tlet showAddTextContentModal = false;\r\n\tlet showSyncConfirmModal = false;\r\n\tlet showAccessControlModal = false;\r\n\r\n\tlet inputFiles = null;\r\n\r\n\tlet filteredItems = [];\r\n\t$: if (knowledge && knowledge.files) {\r\n\t\tfuse = new Fuse(knowledge.files, {\r\n\t\t\tkeys: ['meta.name', 'meta.description']\r\n\t\t});\r\n\t}\r\n\r\n\t$: if (fuse) {\r\n\t\tfilteredItems = query\r\n\t\t\t? fuse.search(query).map((e) => {\r\n\t\t\t\t\treturn e.item;\r\n\t\t\t\t})\r\n\t\t\t: (knowledge?.files ?? []);\r\n\t}\r\n\r\n\tlet selectedFile = null;\r\n\tlet selectedFileId = null;\r\n\r\n\t$: if (selectedFileId) {\r\n\t\tconst file = (knowledge?.files ?? []).find((file) => file.id === selectedFileId);\r\n\t\tif (file) {\r\n\t\t\tfile.data = file.data ?? { content: '' };\r\n\t\t\tselectedFile = file;\r\n\t\t} else {\r\n\t\t\tselectedFile = null;\r\n\t\t}\r\n\t} else {\r\n\t\tselectedFile = null;\r\n\t}\r\n\r\n\tlet fuse = null;\r\n\tlet debounceTimeout = null;\r\n\tlet mediaQuery;\r\n\tlet dragged = false;\r\n\r\n\tconst createFileFromText = (name, content) => {\r\n\t\tconst blob = new Blob([content], { type: 'text/plain' });\r\n\t\tconst file = blobToFile(blob, `${name}.txt`);\r\n\r\n\t\tconsole.log(file);\r\n\t\treturn file;\r\n\t};\r\n\r\n\tconst uploadFileHandler = async (file) => {\r\n\t\tconsole.log(file);\r\n\r\n\t\tconst tempItemId = uuidv4();\r\n\t\tconst fileItem = {\r\n\t\t\ttype: 'file',\r\n\t\t\tfile: '',\r\n\t\t\tid: null,\r\n\t\t\turl: '',\r\n\t\t\tname: file.name,\r\n\t\t\tsize: file.size,\r\n\t\t\tstatus: 'uploading',\r\n\t\t\terror: '',\r\n\t\t\titemId: tempItemId\r\n\t\t};\r\n\r\n\t\tif (fileItem.size == 0) {\r\n\t\t\ttoast.error($i18n.t('You cannot upload an empty file.'));\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tknowledge.files = [...(knowledge.files ?? []), fileItem];\r\n\r\n\t\t// Check if the file is an audio file and transcribe/convert it to text file\r\n\t\tif (['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/x-m4a'].includes(file['type'])) {\r\n\t\t\tconst res = await transcribeAudio(localStorage.token, file).catch((error) => {\r\n\t\t\t\ttoast.error(`${error}`);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tconst blob = new Blob([res.text], { type: 'text/plain' });\r\n\t\t\t\tfile = blobToFile(blob, `${file.name}.txt`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file).catch((e) => {\r\n\t\t\t\ttoast.error(`${e}`);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (uploadedFile) {\r\n\t\t\t\tconsole.log(uploadedFile);\r\n\t\t\t\tknowledge.files = knowledge.files.map((item) => {\r\n\t\t\t\t\tif (item.itemId === tempItemId) {\r\n\t\t\t\t\t\titem.id = uploadedFile.id;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Remove temporary item id\r\n\t\t\t\t\tdelete item.itemId;\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tawait addFileHandler(uploadedFile.id);\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error($i18n.t('Failed to upload file.'));\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\ttoast.error(`${e}`);\r\n\t\t}\r\n\t};\r\n\r\n\tconst uploadDirectoryHandler = async () => {\r\n\t\t// Check if File System Access API is supported\r\n\t\tconst isFileSystemAccessSupported = 'showDirectoryPicker' in window;\r\n\r\n\t\ttry {\r\n\t\t\tif (isFileSystemAccessSupported) {\r\n\t\t\t\t// Modern browsers (Chrome, Edge) implementation\r\n\t\t\t\tawait handleModernBrowserUpload();\r\n\t\t\t} else {\r\n\t\t\t\t// Firefox fallback\r\n\t\t\t\tawait handleFirefoxUpload();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleUploadError(error);\r\n\t\t}\r\n\t};\r\n\r\n\t// Helper function to check if a path contains hidden folders\r\n\tconst hasHiddenFolder = (path) => {\r\n\t\treturn path.split('/').some((part) => part.startsWith('.'));\r\n\t};\r\n\r\n\t// Modern browsers implementation using File System Access API\r\n\tconst handleModernBrowserUpload = async () => {\r\n\t\tconst dirHandle = await window.showDirectoryPicker();\r\n\t\tlet totalFiles = 0;\r\n\t\tlet uploadedFiles = 0;\r\n\r\n\t\t// Function to update the UI with the progress\r\n\t\tconst updateProgress = () => {\r\n\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\r\n\t\t\ttoast.info(`Upload Progress: ${uploadedFiles}/${totalFiles} (${percentage.toFixed(2)}%)`);\r\n\t\t};\r\n\r\n\t\t// Recursive function to count all files excluding hidden ones\r\n\t\tasync function countFiles(dirHandle) {\r\n\t\t\tfor await (const entry of dirHandle.values()) {\r\n\t\t\t\t// Skip hidden files and directories\r\n\t\t\t\tif (entry.name.startsWith('.')) continue;\r\n\r\n\t\t\t\tif (entry.kind === 'file') {\r\n\t\t\t\t\ttotalFiles++;\r\n\t\t\t\t} else if (entry.kind === 'directory') {\r\n\t\t\t\t\t// Only process non-hidden directories\r\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\r\n\t\t\t\t\t\tawait countFiles(entry);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Recursive function to process directories excluding hidden files and folders\r\n\t\tasync function processDirectory(dirHandle, path = '') {\r\n\t\t\tfor await (const entry of dirHandle.values()) {\r\n\t\t\t\t// Skip hidden files and directories\r\n\t\t\t\tif (entry.name.startsWith('.')) continue;\r\n\r\n\t\t\t\tconst entryPath = path ? `${path}/${entry.name}` : entry.name;\r\n\r\n\t\t\t\t// Skip if the path contains any hidden folders\r\n\t\t\t\tif (hasHiddenFolder(entryPath)) continue;\r\n\r\n\t\t\t\tif (entry.kind === 'file') {\r\n\t\t\t\t\tconst file = await entry.getFile();\r\n\t\t\t\t\tconst fileWithPath = new File([file], entryPath, { type: file.type });\r\n\r\n\t\t\t\t\tawait uploadFileHandler(fileWithPath);\r\n\t\t\t\t\tuploadedFiles++;\r\n\t\t\t\t\tupdateProgress();\r\n\t\t\t\t} else if (entry.kind === 'directory') {\r\n\t\t\t\t\t// Only process non-hidden directories\r\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\r\n\t\t\t\t\t\tawait processDirectory(entry, entryPath);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tawait countFiles(dirHandle);\r\n\t\tupdateProgress();\r\n\r\n\t\tif (totalFiles > 0) {\r\n\t\t\tawait processDirectory(dirHandle);\r\n\t\t} else {\r\n\t\t\tconsole.log('No files to upload.');\r\n\t\t}\r\n\t};\r\n\r\n\t// Firefox fallback implementation using traditional file input\r\n\tconst handleFirefoxUpload = async () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t// Create hidden file input\r\n\t\t\tconst input = document.createElement('input');\r\n\t\t\tinput.type = 'file';\r\n\t\t\tinput.webkitdirectory = true;\r\n\t\t\tinput.directory = true;\r\n\t\t\tinput.multiple = true;\r\n\t\t\tinput.style.display = 'none';\r\n\r\n\t\t\t// Add input to DOM temporarily\r\n\t\t\tdocument.body.appendChild(input);\r\n\r\n\t\t\tinput.onchange = async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst files = Array.from(input.files)\r\n\t\t\t\t\t\t// Filter out files from hidden folders\r\n\t\t\t\t\t\t.filter((file) => !hasHiddenFolder(file.webkitRelativePath));\r\n\r\n\t\t\t\t\tlet totalFiles = files.length;\r\n\t\t\t\t\tlet uploadedFiles = 0;\r\n\r\n\t\t\t\t\t// Function to update the UI with the progress\r\n\t\t\t\t\tconst updateProgress = () => {\r\n\t\t\t\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\r\n\t\t\t\t\t\ttoast.info(\r\n\t\t\t\t\t\t\t`Upload Progress: ${uploadedFiles}/${totalFiles} (${percentage.toFixed(2)}%)`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tupdateProgress();\r\n\r\n\t\t\t\t\t// Process all files\r\n\t\t\t\t\tfor (const file of files) {\r\n\t\t\t\t\t\t// Skip hidden files (additional check)\r\n\t\t\t\t\t\tif (!file.name.startsWith('.')) {\r\n\t\t\t\t\t\t\tconst relativePath = file.webkitRelativePath || file.name;\r\n\t\t\t\t\t\t\tconst fileWithPath = new File([file], relativePath, { type: file.type });\r\n\r\n\t\t\t\t\t\t\tawait uploadFileHandler(fileWithPath);\r\n\t\t\t\t\t\t\tuploadedFiles++;\r\n\t\t\t\t\t\t\tupdateProgress();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Clean up\r\n\t\t\t\t\tdocument.body.removeChild(input);\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tinput.onerror = (error) => {\r\n\t\t\t\tdocument.body.removeChild(input);\r\n\t\t\t\treject(error);\r\n\t\t\t};\r\n\r\n\t\t\t// Trigger file picker\r\n\t\t\tinput.click();\r\n\t\t});\r\n\t};\r\n\r\n\t// Error handler\r\n\tconst handleUploadError = (error) => {\r\n\t\tif (error.name === 'AbortError') {\r\n\t\t\ttoast.info('Directory selection was cancelled');\r\n\t\t} else {\r\n\t\t\ttoast.error('Error accessing directory');\r\n\t\t\tconsole.error('Directory access error:', error);\r\n\t\t}\r\n\t};\r\n\r\n\t// Helper function to maintain file paths within zip\r\n\tconst syncDirectoryHandler = async () => {\r\n\t\tif ((knowledge?.files ?? []).length > 0) {\r\n\t\t\tconst res = await resetKnowledgeById(localStorage.token, id).catch((e) => {\r\n\t\t\t\ttoast.error(`${e}`);\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tknowledge = res;\r\n\t\t\t\ttoast.success($i18n.t('Knowledge reset successfully.'));\r\n\r\n\t\t\t\t// Upload directory\r\n\t\t\t\tuploadDirectoryHandler();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tuploadDirectoryHandler();\r\n\t\t}\r\n\t};\r\n\r\n\tconst addFileHandler = async (fileId) => {\r\n\t\tconst updatedKnowledge = await addFileToKnowledgeById(localStorage.token, id, fileId).catch(\r\n\t\t\t(e) => {\r\n\t\t\t\ttoast.error(`${e}`);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tif (updatedKnowledge) {\r\n\t\t\tknowledge = updatedKnowledge;\r\n\t\t\ttoast.success($i18n.t('File added successfully.'));\r\n\t\t} else {\r\n\t\t\ttoast.error($i18n.t('Failed to add file.'));\r\n\t\t\tknowledge.files = knowledge.files.filter((file) => file.id !== fileId);\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteFileHandler = async (fileId) => {\r\n\t\ttry {\r\n\t\t\tconsole.log('Starting file deletion process for:', fileId);\r\n\r\n\t\t\t// Remove from knowledge base only\r\n\t\t\tconst updatedKnowledge = await removeFileFromKnowledgeById(localStorage.token, id, fileId);\r\n\r\n\t\t\tconsole.log('Knowledge base updated:', updatedKnowledge);\r\n\r\n\t\t\tif (updatedKnowledge) {\r\n\t\t\t\tknowledge = updatedKnowledge;\r\n\t\t\t\ttoast.success($i18n.t('File removed successfully.'));\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('Error in deleteFileHandler:', e);\r\n\t\t\ttoast.error(`${e}`);\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateFileContentHandler = async () => {\r\n\t\tconst fileId = selectedFile.id;\r\n\t\tconst content = selectedFile.data.content;\r\n\r\n\t\tconst res = updateFileDataContentById(localStorage.token, fileId, content).catch((e) => {\r\n\t\t\ttoast.error(`${e}`);\r\n\t\t});\r\n\r\n\t\tconst updatedKnowledge = await updateFileFromKnowledgeById(\r\n\t\t\tlocalStorage.token,\r\n\t\t\tid,\r\n\t\t\tfileId\r\n\t\t).catch((e) => {\r\n\t\t\ttoast.error(`${e}`);\r\n\t\t});\r\n\r\n\t\tif (res && updatedKnowledge) {\r\n\t\t\tknowledge = updatedKnowledge;\r\n\t\t\ttoast.success($i18n.t('File content updated successfully.'));\r\n\t\t}\r\n\t};\r\n\r\n\tconst changeDebounceHandler = () => {\r\n\t\tconsole.log('debounce');\r\n\t\tif (debounceTimeout) {\r\n\t\t\tclearTimeout(debounceTimeout);\r\n\t\t}\r\n\r\n\t\tdebounceTimeout = setTimeout(async () => {\r\n\t\t\tif (knowledge.name.trim() === '' || knowledge.description.trim() === '') {\r\n\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst res = await updateKnowledgeById(localStorage.token, id, {\r\n\t\t\t\t...knowledge,\r\n\t\t\t\tname: knowledge.name,\r\n\t\t\t\tdescription: knowledge.description,\r\n\t\t\t\taccess_control: knowledge.access_control\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\ttoast.error(`${e}`);\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\ttoast.success($i18n.t('Knowledge updated successfully'));\r\n\t\t\t\t_knowledge.set(await getKnowledgeBases(localStorage.token));\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\tconst handleMediaQuery = async (e) => {\r\n\t\tif (e.matches) {\r\n\t\t\tlargeScreen = true;\r\n\t\t} else {\r\n\t\t\tlargeScreen = false;\r\n\t\t}\r\n\t};\r\n\r\n\tconst onDragOver = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if a file is being draggedOver.\r\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\r\n\t\t\tdragged = true;\r\n\t\t} else {\r\n\t\t\tdragged = false;\r\n\t\t}\r\n\t};\r\n\r\n\tconst onDragLeave = () => {\r\n\t\tdragged = false;\r\n\t};\r\n\r\n\tconst onDrop = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tdragged = false;\r\n\r\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\r\n\t\t\tif (e.dataTransfer?.files) {\r\n\t\t\t\tconst inputFiles = e.dataTransfer?.files;\r\n\r\n\t\t\t\tif (inputFiles && inputFiles.length > 0) {\r\n\t\t\t\t\tfor (const file of inputFiles) {\r\n\t\t\t\t\t\tawait uploadFileHandler(file);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.error($i18n.t(`File not found.`));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\t// listen to resize 1024px\r\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\r\n\r\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\r\n\t\thandleMediaQuery(mediaQuery);\r\n\r\n\t\t// Select the container element you want to observe\r\n\t\tconst container = document.getElementById('collection-container');\r\n\r\n\t\t// initialize the minSize based on the container width\r\n\t\tminSize = !largeScreen ? 100 : Math.floor((300 / container.clientWidth) * 100);\r\n\r\n\t\t// Create a new ResizeObserver instance\r\n\t\tconst resizeObserver = new ResizeObserver((entries) => {\r\n\t\t\tfor (let entry of entries) {\r\n\t\t\t\tconst width = entry.contentRect.width;\r\n\t\t\t\t// calculate the percentage of 300\r\n\t\t\t\tconst percentage = (300 / width) * 100;\r\n\t\t\t\t// set the minSize to the percentage, must be an integer\r\n\t\t\t\tminSize = !largeScreen ? 100 : Math.floor(percentage);\r\n\r\n\t\t\t\tif (showSidepanel) {\r\n\t\t\t\t\tif (pane && pane.isExpanded() && pane.getSize() < minSize) {\r\n\t\t\t\t\t\tpane.resize(minSize);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Start observing the container's size changes\r\n\t\tresizeObserver.observe(container);\r\n\r\n\t\tif (pane) {\r\n\t\t\tpane.expand();\r\n\t\t}\r\n\r\n\t\tid = $page.params.id;\r\n\r\n\t\tconst res = await getKnowledgeById(localStorage.token, id).catch((e) => {\r\n\t\t\ttoast.error(`${e}`);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tknowledge = res;\r\n\t\t} else {\r\n\t\t\tgoto('/workspace/knowledge');\r\n\t\t}\r\n\r\n\t\tconst dropZone = document.querySelector('body');\r\n\t\tdropZone?.addEventListener('dragover', onDragOver);\r\n\t\tdropZone?.addEventListener('drop', onDrop);\r\n\t\tdropZone?.addEventListener('dragleave', onDragLeave);\r\n\t});\r\n\r\n\tonDestroy(() => {\r\n\t\tmediaQuery?.removeEventListener('change', handleMediaQuery);\r\n\t\tconst dropZone = document.querySelector('body');\r\n\t\tdropZone?.removeEventListener('dragover', onDragOver);\r\n\t\tdropZone?.removeEventListener('drop', onDrop);\r\n\t\tdropZone?.removeEventListener('dragleave', onDragLeave);\r\n\t});\r\n</script>\r\n\r\n{#if dragged}\r\n\t<div\r\n\t\tclass=\"fixed {$showSidebar\r\n\t\t\t? 'left-0 md:left-[260px] md:w-[calc(100%-260px)]'\r\n\t\t\t: 'left-0'}  w-full h-full flex z-50 touch-none pointer-events-none\"\r\n\t\tid=\"dropzone\"\r\n\t\trole=\"region\"\r\n\t\taria-label=\"Drag and Drop Container\"\r\n\t>\r\n\t\t<div class=\"absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center\">\r\n\t\t\t<div class=\"m-auto pt-64 flex flex-col justify-center\">\r\n\t\t\t\t<div class=\"max-w-md\">\r\n\t\t\t\t\t<AddFilesPlaceholder>\r\n\t\t\t\t\t\t<div class=\" mt-2 text-center text-sm dark:text-gray-200 w-full\">\r\n\t\t\t\t\t\t\tDrop any files here to add to my documents\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</AddFilesPlaceholder>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n{/if}\r\n\r\n<SyncConfirmDialog\r\n\tbind:show={showSyncConfirmModal}\r\n\tmessage={$i18n.t(\r\n\t\t'This will reset the knowledge base and sync all files. Do you wish to continue?'\r\n\t)}\r\n\ton:confirm={() => {\r\n\t\tsyncDirectoryHandler();\r\n\t}}\r\n/>\r\n\r\n<AddTextContentModal\r\n\tbind:show={showAddTextContentModal}\r\n\ton:submit={(e) => {\r\n\t\tconst file = createFileFromText(e.detail.name, e.detail.content);\r\n\t\tuploadFileHandler(file);\r\n\t}}\r\n/>\r\n\r\n<input\r\n\tid=\"files-input\"\r\n\tbind:files={inputFiles}\r\n\ttype=\"file\"\r\n\tmultiple\r\n\thidden\r\n\ton:change={async () => {\r\n\t\tif (inputFiles && inputFiles.length > 0) {\r\n\t\t\tfor (const file of inputFiles) {\r\n\t\t\t\tawait uploadFileHandler(file);\r\n\t\t\t}\r\n\r\n\t\t\tinputFiles = null;\r\n\t\t\tconst fileInputElement = document.getElementById('files-input');\r\n\r\n\t\t\tif (fileInputElement) {\r\n\t\t\t\tfileInputElement.value = '';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttoast.error($i18n.t(`File not found.`));\r\n\t\t}\r\n\t}}\r\n/>\r\n\r\n<div class=\"flex flex-col w-full translate-y-1\" id=\"collection-container\">\r\n\t{#if id && knowledge}\r\n\t\t<AccessControlModal\r\n\t\t\tbind:show={showAccessControlModal}\r\n\t\t\tbind:accessControl={knowledge.access_control}\r\n\t\t\tonChange={() => {\r\n\t\t\t\tchangeDebounceHandler();\r\n\t\t\t}}\r\n\t\t\taccessRoles={['read', 'write']}\r\n\t\t/>\r\n\t\t<div class=\"w-full mb-2.5\">\r\n\t\t\t<div class=\" flex w-full\">\r\n\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t<div class=\"flex items-center justify-between w-full px-0.5 mb-1\">\r\n\t\t\t\t\t\t<div class=\"w-full\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tclass=\"text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden\"\r\n\t\t\t\t\t\t\t\tbind:value={knowledge.name}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Knowledge Name\"\r\n\t\t\t\t\t\t\t\ton:input={() => {\r\n\t\t\t\t\t\t\t\t\tchangeDebounceHandler();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"self-center shrink-0\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center\"\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tshowAccessControlModal = true;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<LockClosed strokeWidth=\"2.5\" className=\"size-3.5\" />\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"text-sm font-medium shrink-0\">\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Access')}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex w-full px-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclass=\"text-left text-xs w-full text-gray-500 bg-transparent outline-hidden\"\r\n\t\t\t\t\t\t\tbind:value={knowledge.description}\r\n\t\t\t\t\t\t\tplaceholder=\"Knowledge Description\"\r\n\t\t\t\t\t\t\ton:input={() => {\r\n\t\t\t\t\t\t\t\tchangeDebounceHandler();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3\">\r\n\t\t\t{#if largeScreen}\r\n\t\t\t\t<div class=\"flex-1 flex justify-start w-full h-full max-h-full\">\r\n\t\t\t\t\t{#if selectedFile}\r\n\t\t\t\t\t\t<div class=\" flex flex-col w-full h-full max-h-full\">\r\n\t\t\t\t\t\t\t<div class=\"shrink-0 mb-2 flex items-center\">\r\n\t\t\t\t\t\t\t\t{#if !showSidepanel}\r\n\t\t\t\t\t\t\t\t\t<div class=\"-translate-x-2\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850\"\r\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpane.expand();\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<ChevronLeft strokeWidth=\"2.5\" />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{/if}\r\n\r\n\t\t\t\t\t\t\t\t<div class=\" flex-1 text-xl font-medium\">\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\tclass=\"hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1\"\r\n\t\t\t\t\t\t\t\t\t\thref={selectedFile.id ? `/api/v1/files/${selectedFile.id}/content` : '#'}\r\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{selectedFile?.meta?.name}\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tupdateFileContentHandler();\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#key selectedFile.id}\r\n\t\t\t\t\t\t\t\t\t<RichTextInput\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-prose-sm\"\r\n\t\t\t\t\t\t\t\t\t\tbind:value={selectedFile.data.content}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Add content here')}\r\n\t\t\t\t\t\t\t\t\t\tpreserveBreaks={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{/key}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<div class=\"h-full flex w-full\">\r\n\t\t\t\t\t\t\t<div class=\"m-auto text-xs text-center text-gray-200 dark:text-gray-700\">\r\n\t\t\t\t\t\t\t\t{$i18n.t('Drag and drop a file to upload or select a file to view')}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\t\t\t{:else if !largeScreen && selectedFileId !== null}\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tclassName=\"h-full\"\r\n\t\t\t\t\tshow={selectedFileId !== null}\r\n\t\t\t\t\ton:close={() => {\r\n\t\t\t\t\t\tselectedFileId = null;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"flex flex-col justify-start h-full max-h-full p-2\">\r\n\t\t\t\t\t\t<div class=\" flex flex-col w-full h-full max-h-full\">\r\n\t\t\t\t\t\t\t<div class=\"shrink-0 mt-1 mb-2 flex items-center\">\r\n\t\t\t\t\t\t\t\t<div class=\"mr-2\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<ChevronLeft strokeWidth=\"2.5\" />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\" flex-1 text-xl line-clamp-1\">\r\n\t\t\t\t\t\t\t\t\t{selectedFile?.meta?.name}\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tupdateFileContentHandler();\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#key selectedFile.id}\r\n\t\t\t\t\t\t\t\t\t<RichTextInput\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-prose-sm\"\r\n\t\t\t\t\t\t\t\t\t\tbind:value={selectedFile.data.content}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Add content here')}\r\n\t\t\t\t\t\t\t\t\t\tpreserveBreaks={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{/key}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Drawer>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclass=\"{largeScreen ? 'shrink-0 w-72 max-w-72' : 'flex-1'}\r\n\t\t\tflex\r\n\t\t\tpy-2\r\n\t\t\trounded-2xl\r\n\t\t\tborder\r\n\t\t\tborder-gray-50\r\n\t\t\th-full\r\n\t\t\tdark:border-gray-850\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\" flex flex-col w-full space-x-2 rounded-lg h-full\">\r\n\t\t\t\t\t<div class=\"w-full h-full flex flex-col\">\r\n\t\t\t\t\t\t<div class=\" px-3\">\r\n\t\t\t\t\t\t\t<div class=\"flex mb-0.5\">\r\n\t\t\t\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent\"\r\n\t\t\t\t\t\t\t\t\tbind:value={query}\r\n\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Search Collection')}\r\n\t\t\t\t\t\t\t\t\ton:focus={() => {\r\n\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<AddContentMenu\r\n\t\t\t\t\t\t\t\t\t\ton:upload={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (e.detail.type === 'directory') {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuploadDirectoryHandler();\r\n\t\t\t\t\t\t\t\t\t\t\t} else if (e.detail.type === 'text') {\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowAddTextContentModal = true;\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('files-input').click();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\ton:sync={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tshowSyncConfirmModal = true;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{#if filteredItems.length > 0}\r\n\t\t\t\t\t\t\t<div class=\" flex overflow-y-auto h-full w-full scrollbar-hidden text-xs\">\r\n\t\t\t\t\t\t\t\t<Files\r\n\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\tfiles={filteredItems}\r\n\t\t\t\t\t\t\t\t\t{selectedFileId}\r\n\t\t\t\t\t\t\t\t\ton:click={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tselectedFileId = selectedFileId === e.detail ? null : e.detail;\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ton:delete={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(e.detail);\r\n\r\n\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\r\n\t\t\t\t\t\t\t\t\t\tdeleteFileHandler(e.detail);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<div class=\"my-3 flex flex-col justify-center text-center text-gray-500 text-xs\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('No content found')}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t{:else}\r\n\t\t<Spinner />\r\n\t{/if}\r\n</div>\r\n"],"names":["ctx","insert_hydration","target","svg","anchor","append_hydration","path","className","$$props","strokeWidth","_a","_c","_b","_d","_f","_e","div","dirty","fileitem_changes","i","each_blocks","dispatch","createEventDispatcher","selectedFileId","files","small","file","button","set_data","t1","t1_value","flyAndScale","i18n","getContext","onClose","show","e","$$invalidate","t","t_value","div0","div9","form","div5","div4","div2","div1","input","div3","div8","div6","div7","name","content","voiceInput","value","text","filename","stream","err","toast","$i18n","track","accesscontrolmodal_props","input0","set_input_value","input1","div15","div14","div13","div12","div11","div10","input2","accesscontrolmodal_changes","t3","t3_value","drawer_changes","previous_key","button0","button1","safe_not_equal","showSidepanel","attr","a_href_value","current","create_if_block_6","largeScreen","pane","id","knowledge","query","showAddTextContentModal","showSyncConfirmModal","showAccessControlModal","inputFiles","filteredItems","selectedFile","fuse","debounceTimeout","mediaQuery","dragged","createFileFromText","blob","blobToFile","uploadFileHandler","tempItemId","uuidv4","fileItem","res","transcribeAudio","error","uploadedFile","uploadFile","item","addFileHandler","uploadDirectoryHandler","isFileSystemAccessSupported","handleModernBrowserUpload","handleFirefoxUpload","handleUploadError","hasHiddenFolder","part","dirHandle","totalFiles","uploadedFiles","updateProgress","percentage","countFiles","entry","processDirectory","entryPath","fileWithPath","resolve","reject","relativePath","syncDirectoryHandler","resetKnowledgeById","fileId","updatedKnowledge","addFileToKnowledgeById","deleteFileHandler","removeFileFromKnowledgeById","updateFileContentHandler","updateFileDataContentById","updateFileFromKnowledgeById","changeDebounceHandler","updateKnowledgeById","_knowledge","getKnowledgeBases","handleMediaQuery","onDragOver","onDragLeave","onDrop","onMount","container","entries","$page","getKnowledgeById","goto","dropZone","onDestroy","fileInputElement","$$self","Fuse"],"mappings":"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"}